<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/studyLib/assets/icon.jpeg"><title>二叉树 | 学习资源库</title><meta name="description" content="一个用于学习的 VuePress 站点">
    <link rel="preload" href="/studyLib/assets/style-97653313.css" as="style"><link rel="stylesheet" href="/studyLib/assets/style-97653313.css">
    <link rel="modulepreload" href="/studyLib/assets/app-72993491.js"><link rel="modulepreload" href="/studyLib/assets/003BinaryTree.html-9a24013b.js"><link rel="modulepreload" href="/studyLib/assets/003BinaryTree.html-7e39dc29.js"><link rel="prefetch" href="/studyLib/assets/index.html-2efa10d1.js" as="script"><link rel="prefetch" href="/studyLib/assets/001offer.html-bac406b1.js" as="script"><link rel="prefetch" href="/studyLib/assets/001Sort.html-befbd5f8.js" as="script"><link rel="prefetch" href="/studyLib/assets/002LinkList.html-d9751673.js" as="script"><link rel="prefetch" href="/studyLib/assets/004Graph.html-73dd72b0.js" as="script"><link rel="prefetch" href="/studyLib/assets/005TrieTree.html-fb5bbdee.js" as="script"><link rel="prefetch" href="/studyLib/assets/006Greedy.html-463b0c00.js" as="script"><link rel="prefetch" href="/studyLib/assets/007BruteForceRecursion.html-c32612ce.js" as="script"><link rel="prefetch" href="/studyLib/assets/008Hash.html-dfd72b4a.js" as="script"><link rel="prefetch" href="/studyLib/assets/009DisjointSet.html-c1da4bda.js" as="script"><link rel="prefetch" href="/studyLib/assets/010KMP.html-08dc4939.js" as="script"><link rel="prefetch" href="/studyLib/assets/011Manacher.html-851a418a.js" as="script"><link rel="prefetch" href="/studyLib/assets/012Window.html-35ce89c5.js" as="script"><link rel="prefetch" href="/studyLib/assets/013大数据.html-08dc39af.js" as="script"><link rel="prefetch" href="/studyLib/assets/014位运算.html-7156ded7.js" as="script"><link rel="prefetch" href="/studyLib/assets/015动态规划.html-19b0a341.js" as="script"><link rel="prefetch" href="/studyLib/assets/016有序表.html-bd8c7167.js" as="script"><link rel="prefetch" href="/studyLib/assets/001es.html-61c7fbb3.js" as="script"><link rel="prefetch" href="/studyLib/assets/002lodash.html-2bcf0815.js" as="script"><link rel="prefetch" href="/studyLib/assets/003coding.html-f5926cd9.js" as="script"><link rel="prefetch" href="/studyLib/assets/001打包资源处理.html-24cdc3ab.js" as="script"><link rel="prefetch" href="/studyLib/assets/002webpack配置.html-220baa49.js" as="script"><link rel="prefetch" href="/studyLib/assets/003包管理工具.html-159b64a3.js" as="script"><link rel="prefetch" href="/studyLib/assets/004Bundless.html-ae5a7555.js" as="script"><link rel="prefetch" href="/studyLib/assets/005手写简单webpack.html-2bf49e9b.js" as="script"><link rel="prefetch" href="/studyLib/assets/006模块化方案.html-9a5a76f5.js" as="script"><link rel="prefetch" href="/studyLib/assets/007package和npm.html-8a15325e.js" as="script"><link rel="prefetch" href="/studyLib/assets/008前端质量保障.html-dfab7e01.js" as="script"><link rel="prefetch" href="/studyLib/assets/010rspack.html-19004f0d.js" as="script"><link rel="prefetch" href="/studyLib/assets/001CSS.html-77bdfb21.js" as="script"><link rel="prefetch" href="/studyLib/assets/002Browser.html-fb8c4e1d.js" as="script"><link rel="prefetch" href="/studyLib/assets/003JS.html-6511db18.js" as="script"><link rel="prefetch" href="/studyLib/assets/004Vue.html-60dc2bc0.js" as="script"><link rel="prefetch" href="/studyLib/assets/005React.html-9ec40e07.js" as="script"><link rel="prefetch" href="/studyLib/assets/006工程化.html-4474284b.js" as="script"><link rel="prefetch" href="/studyLib/assets/007Http.html-024ba735.js" as="script"><link rel="prefetch" href="/studyLib/assets/008算法.html-a7f80b9d.js" as="script"><link rel="prefetch" href="/studyLib/assets/011前端调试.html-2653b38b.js" as="script"><link rel="prefetch" href="/studyLib/assets/012装饰器.html-1143f938.js" as="script"><link rel="prefetch" href="/studyLib/assets/997面试题整理.html-30dd7c1f.js" as="script"><link rel="prefetch" href="/studyLib/assets/998HR面.html-4fe89dde.js" as="script"><link rel="prefetch" href="/studyLib/assets/999Other.html-2bafb8e9.js" as="script"><link rel="prefetch" href="/studyLib/assets/001nestjs.html-323234b5.js" as="script"><link rel="prefetch" href="/studyLib/assets/002nestjs装饰器.html-0fb187a0.js" as="script"><link rel="prefetch" href="/studyLib/assets/003nestjs切换上下文.html-97aab697.js" as="script"><link rel="prefetch" href="/studyLib/assets/001React.html-cf1dd876.js" as="script"><link rel="prefetch" href="/studyLib/assets/001Vue.html-fce47e30.js" as="script"><link rel="prefetch" href="/studyLib/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/studyLib/assets/index.html-0c7c69f6.js" as="script"><link rel="prefetch" href="/studyLib/assets/001offer.html-191fdbe5.js" as="script"><link rel="prefetch" href="/studyLib/assets/001Sort.html-280b53df.js" as="script"><link rel="prefetch" href="/studyLib/assets/002LinkList.html-fb9c1719.js" as="script"><link rel="prefetch" href="/studyLib/assets/004Graph.html-0dad7abb.js" as="script"><link rel="prefetch" href="/studyLib/assets/005TrieTree.html-34ca2d6a.js" as="script"><link rel="prefetch" href="/studyLib/assets/006Greedy.html-78f96504.js" as="script"><link rel="prefetch" href="/studyLib/assets/007BruteForceRecursion.html-b2eb33b2.js" as="script"><link rel="prefetch" href="/studyLib/assets/008Hash.html-244a9c67.js" as="script"><link rel="prefetch" href="/studyLib/assets/009DisjointSet.html-cfc4bfc7.js" as="script"><link rel="prefetch" href="/studyLib/assets/010KMP.html-2398b546.js" as="script"><link rel="prefetch" href="/studyLib/assets/011Manacher.html-4b7ab50b.js" as="script"><link rel="prefetch" href="/studyLib/assets/012Window.html-42f82a81.js" as="script"><link rel="prefetch" href="/studyLib/assets/013大数据.html-0dcbf045.js" as="script"><link rel="prefetch" href="/studyLib/assets/014位运算.html-aa0f7ce8.js" as="script"><link rel="prefetch" href="/studyLib/assets/015动态规划.html-83a6ee15.js" as="script"><link rel="prefetch" href="/studyLib/assets/016有序表.html-7be4c959.js" as="script"><link rel="prefetch" href="/studyLib/assets/001es.html-18faa3ab.js" as="script"><link rel="prefetch" href="/studyLib/assets/002lodash.html-27e15aa1.js" as="script"><link rel="prefetch" href="/studyLib/assets/003coding.html-472500dc.js" as="script"><link rel="prefetch" href="/studyLib/assets/001打包资源处理.html-079090a7.js" as="script"><link rel="prefetch" href="/studyLib/assets/002webpack配置.html-1c5b4b6b.js" as="script"><link rel="prefetch" href="/studyLib/assets/003包管理工具.html-aea79c2b.js" as="script"><link rel="prefetch" href="/studyLib/assets/004Bundless.html-ee1d00f3.js" as="script"><link rel="prefetch" href="/studyLib/assets/005手写简单webpack.html-b669b110.js" as="script"><link rel="prefetch" href="/studyLib/assets/006模块化方案.html-1cb5a0fc.js" as="script"><link rel="prefetch" href="/studyLib/assets/007package和npm.html-f059a92c.js" as="script"><link rel="prefetch" href="/studyLib/assets/008前端质量保障.html-a2f1ba4f.js" as="script"><link rel="prefetch" href="/studyLib/assets/010rspack.html-bb5ff69e.js" as="script"><link rel="prefetch" href="/studyLib/assets/001CSS.html-d1d3362c.js" as="script"><link rel="prefetch" href="/studyLib/assets/002Browser.html-aaf69bf6.js" as="script"><link rel="prefetch" href="/studyLib/assets/003JS.html-deb0bda6.js" as="script"><link rel="prefetch" href="/studyLib/assets/004Vue.html-e1a4995f.js" as="script"><link rel="prefetch" href="/studyLib/assets/005React.html-b6a0b20d.js" as="script"><link rel="prefetch" href="/studyLib/assets/006工程化.html-b5a145c3.js" as="script"><link rel="prefetch" href="/studyLib/assets/007Http.html-b5f4113b.js" as="script"><link rel="prefetch" href="/studyLib/assets/008算法.html-08a07cf3.js" as="script"><link rel="prefetch" href="/studyLib/assets/011前端调试.html-4aa4bd45.js" as="script"><link rel="prefetch" href="/studyLib/assets/012装饰器.html-b7656a34.js" as="script"><link rel="prefetch" href="/studyLib/assets/997面试题整理.html-fc44ed4d.js" as="script"><link rel="prefetch" href="/studyLib/assets/998HR面.html-d0fbcf2a.js" as="script"><link rel="prefetch" href="/studyLib/assets/999Other.html-82442ece.js" as="script"><link rel="prefetch" href="/studyLib/assets/001nestjs.html-88dfddd2.js" as="script"><link rel="prefetch" href="/studyLib/assets/002nestjs装饰器.html-c78d21e8.js" as="script"><link rel="prefetch" href="/studyLib/assets/003nestjs切换上下文.html-e7c74e97.js" as="script"><link rel="prefetch" href="/studyLib/assets/001React.html-63986f09.js" as="script"><link rel="prefetch" href="/studyLib/assets/001Vue.html-4cac51c8.js" as="script"><link rel="prefetch" href="/studyLib/assets/404.html-11fb8e97.js" as="script"><link rel="prefetch" href="/studyLib/assets/mermaid.core-d22b6d45.js" as="script"><link rel="prefetch" href="/studyLib/assets/markdown.esm-abe06b83.js" as="script"><link rel="prefetch" href="/studyLib/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/studyLib/assets/VuePlayground-eb9a6c49.js" as="script"><link rel="prefetch" href="/studyLib/assets/giscus-765fdce2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/studyLib/" class=""><!----><span class="site-name">学习资源库</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/studyLib/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/studyLib/algorithm/001Sort.md" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/studyLib/LeetCode/001offer.md" class="" aria-label="LeetCode"><!--[--><!--]--> LeetCode <!--[--><!--]--></a></div><div class="navbar-item"><a href="/studyLib/engineering/001打包资源处理.md" class="" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/studyLib/framework/vue/001Vue.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/studyLib/framework/react/001React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/studyLib/framework/nestjs/001nestjs.md" class="" aria-label="NestJS"><!--[--><!--]--> NestJS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试"><span class="title">面试</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试"><span class="title">面试</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/studyLib/questions/001CSS.md" class="" aria-label="问题"><!--[--><!--]--> 问题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/studyLib/coding/001es.md" class="" aria-label="代码"><!--[--><!--]--> 代码 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/studyLib/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/studyLib/algorithm/001Sort.md" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/studyLib/LeetCode/001offer.md" class="" aria-label="LeetCode"><!--[--><!--]--> LeetCode <!--[--><!--]--></a></div><div class="navbar-item"><a href="/studyLib/engineering/001打包资源处理.md" class="" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/studyLib/framework/vue/001Vue.md" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/studyLib/framework/react/001React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/studyLib/framework/nestjs/001nestjs.md" class="" aria-label="NestJS"><!--[--><!--]--> NestJS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试"><span class="title">面试</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试"><span class="title">面试</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/studyLib/questions/001CSS.md" class="" aria-label="问题"><!--[--><!--]--> 问题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/studyLib/coding/001es.md" class="" aria-label="代码"><!--[--><!--]--> 代码 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/studyLib/algorithm/001Sort.html" class="sidebar-item sidebar-heading" aria-label="排序"><!--[--><!--]--> 排序 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/002LinkList.html" class="sidebar-item sidebar-heading" aria-label="链表"><!--[--><!--]--> 链表 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="二叉树"><!--[--><!--]--> 二叉树 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#课堂" class="router-link-active router-link-exact-active sidebar-item" aria-label="课堂"><!--[--><!--]--> 课堂 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#递归序" class="router-link-active router-link-exact-active sidebar-item" aria-label="递归序"><!--[--><!--]--> 递归序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#先序遍历-深度遍历" class="router-link-active router-link-exact-active sidebar-item" aria-label="先序遍历 (深度遍历)"><!--[--><!--]--> 先序遍历 (深度遍历) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#中序遍历" class="router-link-active router-link-exact-active sidebar-item" aria-label="中序遍历"><!--[--><!--]--> 中序遍历 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#后序遍历" class="router-link-active router-link-exact-active sidebar-item" aria-label="后序遍历"><!--[--><!--]--> 后序遍历 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#层序遍历-剑指104" class="router-link-active router-link-exact-active sidebar-item" aria-label="层序遍历 (剑指104)"><!--[--><!--]--> 层序遍历 (剑指104) <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#课后题" class="router-link-active router-link-exact-active sidebar-item" aria-label="课后题"><!--[--><!--]--> 课后题 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#如何完成二叉树的宽度优先遍历-求一颗二叉树的宽度" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何完成二叉树的宽度优先遍历 (求一颗二叉树的宽度)"><!--[--><!--]--> 如何完成二叉树的宽度优先遍历 (求一颗二叉树的宽度) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#如何判断一颗树是否是搜索二叉树" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何判断一颗树是否是搜索二叉树"><!--[--><!--]--> 如何判断一颗树是否是搜索二叉树 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#如何判断一颗树是否是完全二叉树" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何判断一颗树是否是完全二叉树"><!--[--><!--]--> 如何判断一颗树是否是完全二叉树 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#如何判断一棵树是否是满二叉树" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何判断一棵树是否是满二叉树"><!--[--><!--]--> 如何判断一棵树是否是满二叉树 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#如何判断一棵树是否是平衡二叉树-力扣110" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何判断一棵树是否是平衡二叉树 (力扣110)"><!--[--><!--]--> 如何判断一棵树是否是平衡二叉树 (力扣110) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#给定两个二叉树的节点node1-和-node2-找到他们的最低公共祖先节点-剑指68" class="router-link-active router-link-exact-active sidebar-item" aria-label="给定两个二叉树的节点node1 和 node2，找到他们的最低公共祖先节点 （剑指68）"><!--[--><!--]--> 给定两个二叉树的节点node1 和 node2，找到他们的最低公共祖先节点 （剑指68） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#在二叉树中找到一个节点的后继节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="在二叉树中找到一个节点的后继节点"><!--[--><!--]--> 在二叉树中找到一个节点的后继节点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#二叉树的序列化和反序列化" class="router-link-active router-link-exact-active sidebar-item" aria-label="二叉树的序列化和反序列化"><!--[--><!--]--> 二叉树的序列化和反序列化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#折叠n次-从上到下-打印所有折痕的方向-微软" class="router-link-active router-link-exact-active sidebar-item" aria-label="折叠N次，从上到下，打印所有折痕的方向（微软）"><!--[--><!--]--> 折叠N次，从上到下，打印所有折痕的方向（微软） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#树形dp套路" class="router-link-active router-link-exact-active sidebar-item" aria-label="树形dp套路"><!--[--><!--]--> 树形dp套路 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#二叉树节点最大距离问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="二叉树节点最大距离问题"><!--[--><!--]--> 二叉树节点最大距离问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#最大快乐值问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="最大快乐值问题"><!--[--><!--]--> 最大快乐值问题 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#morris-遍历-线索二叉树" class="router-link-active router-link-exact-active sidebar-item" aria-label="Morris 遍历 (线索二叉树)"><!--[--><!--]--> Morris 遍历 (线索二叉树) <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#morris遍历细节" class="router-link-active router-link-exact-active sidebar-item" aria-label="Morris遍历细节"><!--[--><!--]--> Morris遍历细节 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#morris遍历实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="Morris遍历实现"><!--[--><!--]--> Morris遍历实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#使用morris判断搜索二叉树" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用Morris判断搜索二叉树"><!--[--><!--]--> 使用Morris判断搜索二叉树 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#何为具有平衡性的树" class="router-link-active router-link-exact-active sidebar-item" aria-label="何为具有平衡性的树"><!--[--><!--]--> 何为具有平衡性的树 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#介绍树的左旋" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍树的左旋"><!--[--><!--]--> 介绍树的左旋 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/studyLib/algorithm/003BinaryTree.html#介绍树的右旋" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍树的右旋"><!--[--><!--]--> 介绍树的右旋 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/studyLib/algorithm/004Graph.html" class="sidebar-item sidebar-heading" aria-label="图"><!--[--><!--]--> 图 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/005TrieTree.html" class="sidebar-item sidebar-heading" aria-label="前缀树"><!--[--><!--]--> 前缀树 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/006Greedy.html" class="sidebar-item sidebar-heading" aria-label="贪心算法"><!--[--><!--]--> 贪心算法 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/007BruteForceRecursion.html" class="sidebar-item sidebar-heading" aria-label="暴力递归"><!--[--><!--]--> 暴力递归 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/008Hash.html" class="sidebar-item sidebar-heading" aria-label="哈希函数和哈希表"><!--[--><!--]--> 哈希函数和哈希表 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/009DisjointSet.html" class="sidebar-item sidebar-heading" aria-label="并查集"><!--[--><!--]--> 并查集 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/010KMP.html" class="sidebar-item sidebar-heading" aria-label="KMP"><!--[--><!--]--> KMP <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/011Manacher.html" class="sidebar-item sidebar-heading" aria-label="Manacher算法"><!--[--><!--]--> Manacher算法 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/012Window.html" class="sidebar-item sidebar-heading" aria-label="滑动窗口和单调栈"><!--[--><!--]--> 滑动窗口和单调栈 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/013%E5%A4%A7%E6%95%B0%E6%8D%AE.html" class="sidebar-item sidebar-heading" aria-label="大数据"><!--[--><!--]--> 大数据 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/014%E4%BD%8D%E8%BF%90%E7%AE%97.html" class="sidebar-item sidebar-heading" aria-label="位运算"><!--[--><!--]--> 位运算 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/015%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92.html" class="sidebar-item sidebar-heading" aria-label="动态规划"><!--[--><!--]--> 动态规划 <!--[--><!--]--></a><!----></li><li><a href="/studyLib/algorithm/016%E6%9C%89%E5%BA%8F%E8%A1%A8.html" class="sidebar-item sidebar-heading" aria-label="有序表"><!--[--><!--]--> 有序表 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="二叉树" tabindex="-1"><a class="header-anchor" href="#二叉树" aria-hidden="true">#</a> 二叉树</h1><h2 id="课堂" tabindex="-1"><a class="header-anchor" href="#课堂" aria-hidden="true">#</a> 课堂</h2><h3 id="递归序" tabindex="-1"><a class="header-anchor" href="#递归序" aria-hidden="true">#</a> 递归序</h3><p>每个节点都会走3遍</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> 
    <span class="token punctuation">}</span>
    <span class="token comment">// 1 先序</span>
    <span class="token function">process</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
    <span class="token comment">// 2 中序</span>
    <span class="token function">process</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token comment">// 3 后序</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="先序遍历-深度遍历" tabindex="-1"><a class="header-anchor" href="#先序遍历-深度遍历" aria-hidden="true">#</a> 先序遍历 (深度遍历)</h3><p>先序先打印头节点=&gt;左子树所有节点=&gt;右子树所有节点<br> 也就是递归序第一次来到这个节点时处理</p><div class="vp-code-demo" id="code-demo-19"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function preOrder(tree, list = []) {
    if (tree === null) {
        return
    }
    list.push(tree.val)
    preOrder(tree.left, list)
    preOrder(tree.right, list)
    return list
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function preOrder(tree, list = []) {\n    if (tree === null) {\n        return\n    }\n    list.push(tree.val)\n    preOrder(tree.left, list)\n    preOrder(tree.right, list)\n    return list\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token parameter">tree<span class="token punctuation">,</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tree <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    <span class="token function">preOrder</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>left<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    <span class="token function">preOrder</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>right<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    <span class="token keyword">return</span> list
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-22"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">非递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function preOrder(tree) {
    const list = []
    const stack = [tree]
    while (stack.length) {
        const top = stack.pop()
        list.push(top.val)
        if (top.right) {
            stack.push(top.right)
        }
        if (top.left) {
            stack.push(top.left)
        }
    }
    return list
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function preOrder(tree) {\n    const list = []\n    const stack = [tree]\n    while (stack.length) {\n        const top = stack.pop()\n        list.push(top.val)\n        if (top.right) {\n            stack.push(top.right)\n        }\n        if (top.left) {\n            stack.push(top.left)\n        }\n    }\n    return list\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span>tree<span class="token punctuation">]</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> top <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>top<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>top<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> list
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="中序遍历" tabindex="-1"><a class="header-anchor" href="#中序遍历" aria-hidden="true">#</a> 中序遍历</h3><p>中序:左 =&gt; 头 =&gt; 右 也就是递归序第二次来到这个节点时处理</p><div class="vp-code-demo" id="code-demo-31"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function inOrder(tree, list = []) {
    if (tree === null) {
        return
    }
    inOrder(tree.left, list)
    list.push(tree.val)
    inOrder(tree.right, list)
    return list
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function inOrder(tree, list = []) {\n    if (tree === null) {\n        return\n    }\n    inOrder(tree.left, list)\n    list.push(tree.val)\n    inOrder(tree.right, list)\n    return list\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token parameter">tree<span class="token punctuation">,</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tree <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token function">inOrder</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>left<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    <span class="token function">inOrder</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>right<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    <span class="token keyword">return</span> list
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-34"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">非递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function inOrder(tree) {
    const res = [];
    const stk = [];
    // 找到一颗树，先把它的左节点全都放到栈中去
    while (root || stk.length) {
        while (root) {
            stk.push(root);
            root = root.left;
        }
        // 依次弹出节点
        root = stk.pop();
        res.push(root.val);
        // 对弹出节点的右树重复
        root = root.right;
    }
    return res;
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function inOrder(tree) {\n    const res = [];\n    const stk = [];\n    // 找到一颗树，先把它的左节点全都放到栈中去\n    while (root || stk.length) {\n        while (root) {\n            stk.push(root);\n            root = root.left;\n        }\n        // 依次弹出节点\n        root = stk.pop();\n        res.push(root.val);\n        // 对弹出节点的右树重复\n        root = root.right;\n    }\n    return res;\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stk <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 找到一颗树，先把它的左节点全都放到栈中去</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>root <span class="token operator">||</span> stk<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stk<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
            root <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 依次弹出节点</span>
        root <span class="token operator">=</span> stk<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 对弹出节点的右树重复</span>
        root <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="后序遍历" tabindex="-1"><a class="header-anchor" href="#后序遍历" aria-hidden="true">#</a> 后序遍历</h3><p>后序:左 =&gt; 右 =&gt; 头 也就是递归序第三次来到这个节点时处理</p><div class="vp-code-demo" id="code-demo-43"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function postOrder(tree, list = []) {
    if (tree === null) {
        return
    }
    postOrder(tree.left, list)
    postOrder(tree.right, list)
    list.push(tree.val)
    return list
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function postOrder(tree, list = []) {\n    if (tree === null) {\n        return\n    }\n    postOrder(tree.left, list)\n    postOrder(tree.right, list)\n    list.push(tree.val)\n    return list\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">postOrder</span><span class="token punctuation">(</span><span class="token parameter">tree<span class="token punctuation">,</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tree <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token function">postOrder</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>left<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    <span class="token function">postOrder</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>right<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    <span class="token keyword">return</span> list
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-46"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">非递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function postOrder(tree) {
    const res = []
    const stack = []
    let prev
    while (root || stack.length) {
        // 找到一颗树，先把它的左节点全都放到栈中去
        while (root) {
            stack.push(root)
            root = root.left
        }
        // 依次弹出节点
        root = stack.pop()
        // 如果该节点存在右节点，则需要将其有节点放入栈中，重复执行
        if (!root.right || root.right === prev) {
            // 不存在右节点或右节点等于上个节点，
            // 因为从右节点往上走的时候要判断存不存在右节点，
            // 但这里虽然存在，但是已经处理过了
            res.push(root.val)
            prev = root
            root = null
        } else {
            stack.push(root)
            root = root.right
        }
    }
    return res
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function postOrder(tree) {\n    const res = []\n    const stack = []\n    let prev\n    while (root || stack.length) {\n        // 找到一颗树，先把它的左节点全都放到栈中去\n        while (root) {\n            stack.push(root)\n            root = root.left\n        }\n        // 依次弹出节点\n        root = stack.pop()\n        // 如果该节点存在右节点，则需要将其有节点放入栈中，重复执行\n        if (!root.right || root.right === prev) {\n            // 不存在右节点或右节点等于上个节点，\n            // 因为从右节点往上走的时候要判断存不存在右节点，\n            // 但这里虽然存在，但是已经处理过了\n            res.push(root.val)\n            prev = root\n            root = null\n        } else {\n            stack.push(root)\n            root = root.right\n        }\n    }\n    return res\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">postOrder</span><span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> prev
    <span class="token keyword">while</span> <span class="token punctuation">(</span>root <span class="token operator">||</span> stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 找到一颗树，先把它的左节点全都放到栈中去</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
            root <span class="token operator">=</span> root<span class="token punctuation">.</span>left
        <span class="token punctuation">}</span>
        <span class="token comment">// 依次弹出节点</span>
        root <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 如果该节点存在右节点，则需要将其有节点放入栈中，重复执行</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">.</span>right <span class="token operator">||</span> root<span class="token punctuation">.</span>right <span class="token operator">===</span> prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 不存在右节点或右节点等于上个节点，</span>
            <span class="token comment">// 因为从右节点往上走的时候要判断存不存在右节点，</span>
            <span class="token comment">// 但这里虽然存在，但是已经处理过了</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
            prev <span class="token operator">=</span> root
            root <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
            root <span class="token operator">=</span> root<span class="token punctuation">.</span>right
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="层序遍历-剑指104" tabindex="-1"><a class="header-anchor" href="#层序遍历-剑指104" aria-hidden="true">#</a> 层序遍历 (剑指104)</h3><div class="vp-code-demo" id="code-demo-52"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">层序遍历但不分层</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function levelOrder(root) {
    const list = []
    const queue = [root]
    while (queue.length) {
        const head = queue.shift()
        list.push(head.val)
        if (head.left) {
            queue.push(head.left)
        }
        if (head.right) {
            queue.push(head.right)
        }
    }
    return list
}
   "><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function levelOrder(root) {\n    const list = []\n    const queue = [root]\n    while (queue.length) {\n        const head = queue.shift()\n        list.push(head.val)\n        if (head.left) {\n            queue.push(head.left)\n        }\n        if (head.right) {\n            queue.push(head.right)\n        }\n    }\n    return list\n}\n   &quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">levelOrder</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> head <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> list
<span class="token punctuation">}</span>
   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-55"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">层序遍历并分层</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function levelOrder(root) {
    if (!root) return []
    const res = []
    const queue = [root]
    while (queue.length) {
        const currentLevelSize = queue.length
        res.push([])
        const level = res.length - 1
        for (let i = 0; i &lt; currentLevelSize; i++) {
            const head = queue.shift()
            res[level].push(head.val)
            if (head.left) {
                queue.push(head.left)
            }
            if (head.right) {
                queue.push(head.right)
            }
        }
    }
    return res
}
   "><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function levelOrder(root) {\n    if (!root) return []\n    const res = []\n    const queue = [root]\n    while (queue.length) {\n        const currentLevelSize = queue.length\n        res.push([])\n        const level = res.length - 1\n        for (let i = 0; i &lt; currentLevelSize; i++) {\n            const head = queue.shift()\n            res[level].push(head.val)\n            if (head.left) {\n                queue.push(head.left)\n            }\n            if (head.right) {\n                queue.push(head.right)\n            }\n        }\n    }\n    return res\n}\n   &quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">levelOrder</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> currentLevelSize <span class="token operator">=</span> queue<span class="token punctuation">.</span>length
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> level <span class="token operator">=</span> res<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> currentLevelSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> head <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            res<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h2 id="课后题" tabindex="-1"><a class="header-anchor" href="#课后题" aria-hidden="true">#</a> 课后题</h2><h3 id="如何完成二叉树的宽度优先遍历-求一颗二叉树的宽度" tabindex="-1"><a class="header-anchor" href="#如何完成二叉树的宽度优先遍历-求一颗二叉树的宽度" aria-hidden="true">#</a> 如何完成二叉树的宽度优先遍历 (求一颗二叉树的宽度)</h3><div class="vp-code-demo" id="code-demo-64"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">用哈希表</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function getWidth(root) {
    const queue = [root]
    const levelMap = new Map()
    levelMap.set(root, 1)
    let curLevel = 1
    let curLevelNodeCount = 0
    let max = Number.MIN_SAFE_INTEGER
    while (queue.length) {
        const head = queue.shift()
        let curNodeLevel = levelMap.get(head)
        if (curNodeLevel === curLevel) {
            curLevelNodeCount++
        } else {
            max = Math.max(max, curLevelNodeCount)
            curLevel++
            curLevelNodeCount = 0
        }
        if (head.left) {
            levelMap.set(head.left, curLevel + 1)
            queue.push(head.left)
        }
        if (head.right) {
            levelMap.set(head.right, curLevel + 1)
            queue.push(head.right)
        }
    }
    return max
}
   "><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function getWidth(root) {\n    const queue = [root]\n    const levelMap = new Map()\n    levelMap.set(root, 1)\n    let curLevel = 1\n    let curLevelNodeCount = 0\n    let max = Number.MIN_SAFE_INTEGER\n    while (queue.length) {\n        const head = queue.shift()\n        let curNodeLevel = levelMap.get(head)\n        if (curNodeLevel === curLevel) {\n            curLevelNodeCount++\n        } else {\n            max = Math.max(max, curLevelNodeCount)\n            curLevel++\n            curLevelNodeCount = 0\n        }\n        if (head.left) {\n            levelMap.set(head.left, curLevel + 1)\n            queue.push(head.left)\n        }\n        if (head.right) {\n            levelMap.set(head.right, curLevel + 1)\n            queue.push(head.right)\n        }\n    }\n    return max\n}\n   &quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token keyword">const</span> levelMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    levelMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> curLevel <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">let</span> curLevelNodeCount <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">let</span> max <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> head <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> curNodeLevel <span class="token operator">=</span> levelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>curNodeLevel <span class="token operator">===</span> curLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            curLevelNodeCount<span class="token operator">++</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> curLevelNodeCount<span class="token punctuation">)</span>
            curLevel<span class="token operator">++</span>
            curLevelNodeCount <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            levelMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">,</span> curLevel <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
            queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            levelMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">,</span> curLevel <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
            queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> max
<span class="token punctuation">}</span>
   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-67"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">不使用哈希表</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function getWidth(root) {
    if (!root) return 0
    const res = []
    const queue = [root]
    let max = -Infinity
    while (queue.length) {
        const currentLevelSize = queue.length
        res.push([])
        const level = res.length - 1
        max = Math.max(max, currentLevelSize)
        for (let i = 0; i &lt; currentLevelSize; i++) {
            const head = queue.shift()
            res[level].push(head.val)
            if (head.left) {
                queue.push(head.left)
            }
            if (head.right) {
                queue.push(head.right)
            }
        }
    }
    return max
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function getWidth(root) {\n    if (!root) return 0\n    const res = []\n    const queue = [root]\n    let max = -Infinity\n    while (queue.length) {\n        const currentLevelSize = queue.length\n        res.push([])\n        const level = res.length - 1\n        max = Math.max(max, currentLevelSize)\n        for (let i = 0; i &lt; currentLevelSize; i++) {\n            const head = queue.shift()\n            res[level].push(head.val)\n            if (head.left) {\n                queue.push(head.left)\n            }\n            if (head.right) {\n                queue.push(head.right)\n            }\n        }\n    }\n    return max\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> currentLevelSize <span class="token operator">=</span> queue<span class="token punctuation">.</span>length
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> level <span class="token operator">=</span> res<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
        max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> currentLevelSize<span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> currentLevelSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> head <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            res<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> max
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="如何判断一颗树是否是搜索二叉树" tabindex="-1"><a class="header-anchor" href="#如何判断一颗树是否是搜索二叉树" aria-hidden="true">#</a> 如何判断一颗树是否是搜索二叉树</h3><p>中序遍历时一定是升序的</p><div class="vp-code-demo" id="code-demo-76"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">递归</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function isBST(root, prev = -Infinity) {
    if (!root) return true
    if (!isBST(root.left, prev)) {
        return false
    }
    if (root.val &lt;= prev) {
        return false
    }
    prev = root.val
    return isBST(root.right, prev)
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function isBST(root, prev = -Infinity) {\n    if (!root) return true\n    if (!isBST(root.left, prev)) {\n        return false\n    }\n    if (root.val &lt;= prev) {\n        return false\n    }\n    prev = root.val\n    return isBST(root.right, prev)\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isBST</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> prev <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> prev<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    prev <span class="token operator">=</span> root<span class="token punctuation">.</span>val
    <span class="token keyword">return</span> <span class="token function">isBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> prev<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-79"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">迭代</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function isBinarySearchTree(root) {
    const stack = []
    let prev = -Infinity
    while (root || stack.length) {
        while (root) {
            stack.push(root)
            root = root.left
        }
        const top = stack.pop()
        if (prev &gt;= top.val) {
            return false
        }
        prev = top.val
        if (top.right) {
            root = top.right
        }
    }
    return true
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function isBinarySearchTree(root) {\n    const stack = []\n    let prev = -Infinity\n    while (root || stack.length) {\n        while (root) {\n            stack.push(root)\n            root = root.left\n        }\n        const top = stack.pop()\n        if (prev &gt;= top.val) {\n            return false\n        }\n        prev = top.val\n        if (top.right) {\n            root = top.right\n        }\n    }\n    return true\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isBinarySearchTree</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> prev <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>root <span class="token operator">||</span> stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
            root <span class="token operator">=</span> root<span class="token punctuation">.</span>left
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> top <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">&gt;=</span> top<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        prev <span class="token operator">=</span> top<span class="token punctuation">.</span>val
        <span class="token keyword">if</span> <span class="token punctuation">(</span>top<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            root <span class="token operator">=</span> top<span class="token punctuation">.</span>right
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="vp-code-demo" id="code-demo-82"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">列可能性</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function helper(root) {
    if (!root) {
        return {
            isBST: true,
            min: Infinity,
            max: -Infinity,
        }
    }
    const {
        isBST: isLeftBST,
        max,
    } = helper(root.left)
    const {
        isBST: isRightBST,
        min
    } = helper(root.right)
    const newMax = Math.max(max, root.val)
    const newMin = Math.min(min, root.val)
    const isBST = isLeftBST &amp;&amp; isRightBST &amp;&amp; max &lt; root.val &amp;&amp; root.val &lt; min
    return {
        isBST,
        max: newMax,
        min: newMin
    }
}

function isBST(root) {
    if (!root) return true
    return helper(root).isBST
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function helper(root) {\n    if (!root) {\n        return {\n            isBST: true,\n            min: Infinity,\n            max: -Infinity,\n        }\n    }\n    const {\n        isBST: isLeftBST,\n        max,\n    } = helper(root.left)\n    const {\n        isBST: isRightBST,\n        min\n    } = helper(root.right)\n    const newMax = Math.max(max, root.val)\n    const newMin = Math.min(min, root.val)\n    const isBST = isLeftBST &amp;&amp; isRightBST &amp;&amp; max &lt; root.val &amp;&amp; root.val &lt; min\n    return {\n        isBST,\n        max: newMax,\n        min: newMin\n    }\n}\n\nfunction isBST(root) {\n    if (!root) return true\n    return helper(root).isBST\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">isBST</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
            <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">isBST</span><span class="token operator">:</span> isLeftBST<span class="token punctuation">,</span>
        max<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">isBST</span><span class="token operator">:</span> isRightBST<span class="token punctuation">,</span>
        min
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token keyword">const</span> newMax <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    <span class="token keyword">const</span> newMin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    <span class="token keyword">const</span> isBST <span class="token operator">=</span> isLeftBST <span class="token operator">&amp;&amp;</span> isRightBST <span class="token operator">&amp;&amp;</span> max <span class="token operator">&lt;</span> root<span class="token punctuation">.</span>val <span class="token operator">&amp;&amp;</span> root<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> min
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        isBST<span class="token punctuation">,</span>
        <span class="token literal-property property">max</span><span class="token operator">:</span> newMax<span class="token punctuation">,</span>
        <span class="token literal-property property">min</span><span class="token operator">:</span> newMin
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isBST</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>isBST
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="如何判断一颗树是否是完全二叉树" tabindex="-1"><a class="header-anchor" href="#如何判断一颗树是否是完全二叉树" aria-hidden="true">#</a> 如何判断一颗树是否是完全二叉树</h3><p>若设二叉树的深度为h，除第 h 层外，其它各层 (1～h-1) 的结点数都达到最大个数，第 h 层所有的结点都连续集中在最左边，这就是完全二叉树。</p><p>利用层序遍历</p><ol><li>任一节点有右无左 false</li><li>在不违规条件下，如果遇到了第一个左右子节点补全，后续必须都是叶子节点</li></ol><div class="vp-code-demo" id="code-demo-106"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">CompleteBinaryTree</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function isCBT(head) {
    if (!head) return true
    // 是否遇到过左右两孩子不双全的节点
    let leaf = false
    let l = null
    let r = null
    const queue = []
    queue.push(head)
    while (queue.length) {
        head = queue.shift()
        l = head.left
        r = head.right
        if (
            /**
             * 任一节点有右无左
             */
            (l === null &amp;&amp; r !== null) 
            /**
             * 不是叶子节点（有孩子）
             */
            || (leaf &amp;&amp; (l !== null || r !== null))
            
        ) {
            return false
        }
        if (l !== null) {
            queue.push(l)
        }
        if (r !== null) {
            queue.push(r)
        }
        if (l === null || r === null) {
            // 遇到了第一个左右子节点补全，后续必须都是叶子节点
            leaf = true
        }
    }
    return true
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function isCBT(head) {\n    if (!head) return true\n    // 是否遇到过左右两孩子不双全的节点\n    let leaf = false\n    let l = null\n    let r = null\n    const queue = []\n    queue.push(head)\n    while (queue.length) {\n        head = queue.shift()\n        l = head.left\n        r = head.right\n        if (\n            /**\n             * 任一节点有右无左\n             */\n            (l === null &amp;&amp; r !== null) \n            /**\n             * 不是叶子节点（有孩子）\n             */\n            || (leaf &amp;&amp; (l !== null || r !== null))\n            \n        ) {\n            return false\n        }\n        if (l !== null) {\n            queue.push(l)\n        }\n        if (r !== null) {\n            queue.push(r)\n        }\n        if (l === null || r === null) {\n            // 遇到了第一个左右子节点补全，后续必须都是叶子节点\n            leaf = true\n        }\n    }\n    return true\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isCBT</span><span class="token punctuation">(</span><span class="token parameter">head</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>head<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token comment">// 是否遇到过左右两孩子不双全的节点</span>
    <span class="token keyword">let</span> leaf <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">let</span> l <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        head <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        l <span class="token operator">=</span> head<span class="token punctuation">.</span>left
        r <span class="token operator">=</span> head<span class="token punctuation">.</span>right
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
            <span class="token doc-comment comment">/**
             * 任一节点有右无左
             */</span>
            <span class="token punctuation">(</span>l <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> r <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> 
            <span class="token doc-comment comment">/**
             * 不是叶子节点（有孩子）
             */</span>
            <span class="token operator">||</span> <span class="token punctuation">(</span>leaf <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">||</span> r <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> r <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 遇到了第一个左右子节点补全，后续必须都是叶子节点</span>
            leaf <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="如何判断一棵树是否是满二叉树" tabindex="-1"><a class="header-anchor" href="#如何判断一棵树是否是满二叉树" aria-hidden="true">#</a> 如何判断一棵树是否是满二叉树</h3><div class="vp-code-demo" id="code-demo-112"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><!----><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function helper(root) {
    if (!root) {
        return {
            height: 0,
            nodeCount: 0
        }
    }
    const {
        height: leftHeight,
        nodeCount: leftNodeCount,
    } = helper(root.left)
    const {
        height: rightHeight,
        nodeCount: rightNodeCount,
    } = helper(root.right)
    const height = Math.max(leftHeight, rightHeight) + 1
    const nodeCount = leftNodeCount + rightNodeCount + 1
    return {
        height,
        nodeCount,
    }
}

function isFullBinaryTree(root) {
    const {
        height,
        nodeCount,
    } = helper(root)
    const fullCount = Math.pow(2, height) - 1
    return fullCount === nodeCount
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function helper(root) {\n    if (!root) {\n        return {\n            height: 0,\n            nodeCount: 0\n        }\n    }\n    const {\n        height: leftHeight,\n        nodeCount: leftNodeCount,\n    } = helper(root.left)\n    const {\n        height: rightHeight,\n        nodeCount: rightNodeCount,\n    } = helper(root.right)\n    const height = Math.max(leftHeight, rightHeight) + 1\n    const nodeCount = leftNodeCount + rightNodeCount + 1\n    return {\n        height,\n        nodeCount,\n    }\n}\n\nfunction isFullBinaryTree(root) {\n    const {\n        height,\n        nodeCount,\n    } = helper(root)\n    const fullCount = Math.pow(2, height) - 1\n    return fullCount === nodeCount\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">nodeCount</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> leftHeight<span class="token punctuation">,</span>
        <span class="token literal-property property">nodeCount</span><span class="token operator">:</span> leftNodeCount<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> rightHeight<span class="token punctuation">,</span>
        <span class="token literal-property property">nodeCount</span><span class="token operator">:</span> rightNodeCount<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token keyword">const</span> height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftHeight<span class="token punctuation">,</span> rightHeight<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">const</span> nodeCount <span class="token operator">=</span> leftNodeCount <span class="token operator">+</span> rightNodeCount <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        height<span class="token punctuation">,</span>
        nodeCount<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isFullBinaryTree</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        height<span class="token punctuation">,</span>
        nodeCount<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
    <span class="token keyword">const</span> fullCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">return</span> fullCount <span class="token operator">===</span> nodeCount
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="如何判断一棵树是否是平衡二叉树-力扣110" tabindex="-1"><a class="header-anchor" href="#如何判断一棵树是否是平衡二叉树-力扣110" aria-hidden="true">#</a> 如何判断一棵树是否是平衡二叉树 (力扣110)</h3><p>对于任何一个子树来说，它的左树和右树的高度差不能超过1</p><div class="vp-code-demo" id="code-demo-121"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><!----><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function helper(root) {
    if (!root) {
        return {
            isBalanced: true,
            height: 0
        }
    }
    const {
        isBalanced: isLeftBalanced,
        height: leftHeight
    } = helper(root.left)
    const {
        isBalanced: isRightBalanced,
        height: rightHeight
    } = helper(root.right)
    const height = Math.max(leftHeight, rightHeight) + 1
    const isBalanced = isLeftBalanced &amp;&amp; isRightBalanced &amp;&amp; Math.abs(leftHeight - rightHeight) &lt; 2
    return {
        isBalanced,
        height,
    }
}

function isBalanceBinaryTree(root) {
    if (!root) return true
    return helper(root).isBalanced
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function helper(root) {\n    if (!root) {\n        return {\n            isBalanced: true,\n            height: 0\n        }\n    }\n    const {\n        isBalanced: isLeftBalanced,\n        height: leftHeight\n    } = helper(root.left)\n    const {\n        isBalanced: isRightBalanced,\n        height: rightHeight\n    } = helper(root.right)\n    const height = Math.max(leftHeight, rightHeight) + 1\n    const isBalanced = isLeftBalanced &amp;&amp; isRightBalanced &amp;&amp; Math.abs(leftHeight - rightHeight) &lt; 2\n    return {\n        isBalanced,\n        height,\n    }\n}\n\nfunction isBalanceBinaryTree(root) {\n    if (!root) return true\n    return helper(root).isBalanced\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">isBalanced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">isBalanced</span><span class="token operator">:</span> isLeftBalanced<span class="token punctuation">,</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> leftHeight
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">isBalanced</span><span class="token operator">:</span> isRightBalanced<span class="token punctuation">,</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> rightHeight
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token keyword">const</span> height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftHeight<span class="token punctuation">,</span> rightHeight<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">const</span> isBalanced <span class="token operator">=</span> isLeftBalanced <span class="token operator">&amp;&amp;</span> isRightBalanced <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>leftHeight <span class="token operator">-</span> rightHeight<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        isBalanced<span class="token punctuation">,</span>
        height<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isBalanceBinaryTree</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>isBalanced
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="给定两个二叉树的节点node1-和-node2-找到他们的最低公共祖先节点-剑指68" tabindex="-1"><a class="header-anchor" href="#给定两个二叉树的节点node1-和-node2-找到他们的最低公共祖先节点-剑指68" aria-hidden="true">#</a> 给定两个二叉树的节点node1 和 node2，找到他们的最低公共祖先节点 （剑指68）</h3><div class="vp-code-demo" id="code-demo-127"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">哈希表</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function lowestCommonAncestor(root, node1, node2) {
    const parentMap = new Map()
    const stack = [root]
    parentMap.set(root, root)
    while (stack.length) {
        const top = stack.pop()

        if (top.right) {
            parentMap.set(top.right, top)
            stack.push(top.right)
        }
        if (top.left) {
            parentMap.set(top.left, top)
            stack.push(top.left)
        }
    }

    const st1 = new Set()
    st1.add(node1)
    let cur = node1
    while (cur !== parentMap.get(cur)) {
        st1.add(cur)
        cur = parentMap.get(cur)
    }
    st1.add(root)

    cur = node2
    while (cur) {
        if (st1.has(cur)) {
            return cur
        }
        cur = parentMap.get(cur)
    }
    return root
}
"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function lowestCommonAncestor(root, node1, node2) {\n    const parentMap = new Map()\n    const stack = [root]\n    parentMap.set(root, root)\n    while (stack.length) {\n        const top = stack.pop()\n\n        if (top.right) {\n            parentMap.set(top.right, top)\n            stack.push(top.right)\n        }\n        if (top.left) {\n            parentMap.set(top.left, top)\n            stack.push(top.left)\n        }\n    }\n\n    const st1 = new Set()\n    st1.add(node1)\n    let cur = node1\n    while (cur !== parentMap.get(cur)) {\n        st1.add(cur)\n        cur = parentMap.get(cur)\n    }\n    st1.add(root)\n\n    cur = node2\n    while (cur) {\n        if (st1.has(cur)) {\n            return cur\n        }\n        cur = parentMap.get(cur)\n    }\n    return root\n}\n&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">lowestCommonAncestor</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> node1<span class="token punctuation">,</span> node2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> parentMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    parentMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> root<span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> top <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>top<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            parentMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>right<span class="token punctuation">,</span> top<span class="token punctuation">)</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>top<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            parentMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>left<span class="token punctuation">,</span> top<span class="token punctuation">)</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> st1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    st1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node1<span class="token punctuation">)</span>
    <span class="token keyword">let</span> cur <span class="token operator">=</span> node1
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!==</span> parentMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        st1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
        cur <span class="token operator">=</span> parentMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    st1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>

    cur <span class="token operator">=</span> node2
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>st1<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cur
        <span class="token punctuation">}</span>
        cur <span class="token operator">=</span> parentMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> root
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><p>方法二: 不使用哈希表</p><p>情况分析:</p><ol><li>O1是O2的最低公共祖先，获O2是O1的最低公共最先</li><li>O1和O2彼此不互为公共祖先，需要向上搜索找到</li></ol><div class="vp-code-demo" id="code-demo-148"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><span class="vp-code-demo-title">无哈希表</span><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="/**
 * 为什么可以这么做，因为有个前提得条件  node1 和 node2 都一定存在于树里
 */
function lowestCommonAncestor(root, node1, node2) {
    /**
     * 如果root为空则说明下方不可能有node2或者node1 直接返回
     * 如果root为node1获node2则直接返回
     */
    if (root === null || root === node1 || root === node2) { // base case
        return root
    }
    
    /**
     * 左树要答案，如果既没有node1又没有node2，则势必返回null，右树同
     * 但是假设其中一树返回空，则说明node1和node2都在同一树中
     * 答案肯定在不空的里
     */
    const left = lowestCommonAncestor(root.left, node1, node2)
    const right = lowestCommonAncestor(root.right, node1, node2)
    // 左右都不为空，此时只有一种可能性，它的下方一定有node1和node2.
    // 而如果它有其他兄弟节点，势必会返回null
    // 层层往上一定会返回它本身，也就是这个最近祖先节点
    if (left !== null &amp;&amp; right !== null) {
        return root
    }
    return left !== null ? left : right
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;/**\n * 为什么可以这么做，因为有个前提得条件  node1 和 node2 都一定存在于树里\n */\nfunction lowestCommonAncestor(root, node1, node2) {\n    /**\n     * 如果root为空则说明下方不可能有node2或者node1 直接返回\n     * 如果root为node1获node2则直接返回\n     */\n    if (root === null || root === node1 || root === node2) { // base case\n        return root\n    }\n    \n    /**\n     * 左树要答案，如果既没有node1又没有node2，则势必返回null，右树同\n     * 但是假设其中一树返回空，则说明node1和node2都在同一树中\n     * 答案肯定在不空的里\n     */\n    const left = lowestCommonAncestor(root.left, node1, node2)\n    const right = lowestCommonAncestor(root.right, node1, node2)\n    // 左右都不为空，此时只有一种可能性，它的下方一定有node1和node2.\n    // 而如果它有其他兄弟节点，势必会返回null\n    // 层层往上一定会返回它本身，也就是这个最近祖先节点\n    if (left !== null &amp;&amp; right !== null) {\n        return root\n    }\n    return left !== null ? left : right\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 为什么可以这么做，因为有个前提得条件  node1 和 node2 都一定存在于树里
 */</span>
<span class="token keyword">function</span> <span class="token function">lowestCommonAncestor</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> node1<span class="token punctuation">,</span> node2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 如果root为空则说明下方不可能有node2或者node1 直接返回
     * 如果root为node1获node2则直接返回
     */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> root <span class="token operator">===</span> node1 <span class="token operator">||</span> root <span class="token operator">===</span> node2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// base case</span>
        <span class="token keyword">return</span> root
    <span class="token punctuation">}</span>
    
    <span class="token doc-comment comment">/**
     * 左树要答案，如果既没有node1又没有node2，则势必返回null，右树同
     * 但是假设其中一树返回空，则说明node1和node2都在同一树中
     * 答案肯定在不空的里
     */</span>
    <span class="token keyword">const</span> left <span class="token operator">=</span> <span class="token function">lowestCommonAncestor</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> node1<span class="token punctuation">,</span> node2<span class="token punctuation">)</span>
    <span class="token keyword">const</span> right <span class="token operator">=</span> <span class="token function">lowestCommonAncestor</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> node1<span class="token punctuation">,</span> node2<span class="token punctuation">)</span>
    <span class="token comment">// 左右都不为空，此时只有一种可能性，它的下方一定有node1和node2.</span>
    <span class="token comment">// 而如果它有其他兄弟节点，势必会返回null</span>
    <span class="token comment">// 层层往上一定会返回它本身，也就是这个最近祖先节点</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> root
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> left <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">?</span> left <span class="token operator">:</span> right
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="在二叉树中找到一个节点的后继节点" tabindex="-1"><a class="header-anchor" href="#在二叉树中找到一个节点的后继节点" aria-hidden="true">#</a> 在二叉树中找到一个节点的后继节点</h3><p>后续节点：中序遍历中一个节点的后面的节点<br> 前驱节点：中序遍历中一个节点的前面的节点</p><ol><li>x有右树的时候，它的后继节点是它右树上的最左节点</li><li>x无右树的时候，往上走一直到这个节点是父亲的左节点时，我们称之为Y，Y的父节点就是后继节点，如果不存在那就是null</li></ol><div class="vp-code-demo" id="code-demo-169"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><!----><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function getLeftMost(node) {
    if (node === null) {
        return node
    }
    while (node.left !== null) {
        node = node.left
    }
    return node
}
  
function getSuccessorNode(node) {
    if (node === null) {
        return node
    }
    /**
     * 有右子树，它的后继节点是它右树上的最左节点
     */
    if (node.right !== null) {
        return getLeftMost(node.right)
    }
    // 无右子树，往上走一直到这个节点是父亲的左节点时，我们称之为Y，Y的父节点就是后继节点，如果不存在那就是null
    let parent = node.parent
    while (parent !== null &amp;&amp; parent.left !== node) { // 当前节点时父亲节点右孩子
        node = parent
        parent = node.parent
    }
    return parent
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function getLeftMost(node) {\n    if (node === null) {\n        return node\n    }\n    while (node.left !== null) {\n        node = node.left\n    }\n    return node\n}\n  \nfunction getSuccessorNode(node) {\n    if (node === null) {\n        return node\n    }\n    /**\n     * 有右子树，它的后继节点是它右树上的最左节点\n     */\n    if (node.right !== null) {\n        return getLeftMost(node.right)\n    }\n    // 无右子树，往上走一直到这个节点是父亲的左节点时，我们称之为Y，Y的父节点就是后继节点，如果不存在那就是null\n    let parent = node.parent\n    while (parent !== null &amp;&amp; parent.left !== node) { // 当前节点时父亲节点右孩子\n        node = parent\n        parent = node.parent\n    }\n    return parent\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getLeftMost</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> node
    <span class="token punctuation">}</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        node <span class="token operator">=</span> node<span class="token punctuation">.</span>left
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> node
<span class="token punctuation">}</span>
  
<span class="token keyword">function</span> <span class="token function">getSuccessorNode</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> node
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     * 有右子树，它的后继节点是它右树上的最左节点
     */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>right <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getLeftMost</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 无右子树，往上走一直到这个节点是父亲的左节点时，我们称之为Y，Y的父节点就是后继节点，如果不存在那就是null</span>
    <span class="token keyword">let</span> parent <span class="token operator">=</span> node<span class="token punctuation">.</span>parent
    <span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>left <span class="token operator">!==</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当前节点时父亲节点右孩子</span>
        node <span class="token operator">=</span> parent
        parent <span class="token operator">=</span> node<span class="token punctuation">.</span>parent
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> parent
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h3 id="二叉树的序列化和反序列化" tabindex="-1"><a class="header-anchor" href="#二叉树的序列化和反序列化" aria-hidden="true">#</a> 二叉树的序列化和反序列化</h3><p>就是内存里的一棵树如何变成字符串形式，又如何从字符串形式变成内存里的树<br> 如何判断一棵二叉树是不是另一棵二叉树的子树？ 可以字符串匹配了</p><h3 id="折叠n次-从上到下-打印所有折痕的方向-微软" tabindex="-1"><a class="header-anchor" href="#折叠n次-从上到下-打印所有折痕的方向-微软" aria-hidden="true">#</a> 折叠N次，从上到下，打印所有折痕的方向（微软）</h3><p>可以感觉出来二叉树的感觉，第一次一个凹折痕<br> 第二次折：上方多一个凹折痕，下方多一个凸折痕<br> 第三次：上次出现的两条折痕，上下方各出现一条折痕（共4条）上折痕都是凹，下折痕都是凸</p><p>你会发现，总的头节点凹折痕，每一棵左子树都为凹折痕，每一棵右子树都为凸折痕</p><p>想要打印所有折痕方向，可以中序遍历（左中右）</p><div class="vp-code-demo" id="code-demo-190"><div class="vp-code-demo-header"><button type="button" title="toggle" aria-hidden="true" class="vp-code-demo-toggle-button end"></button><!----><form class="code-demo-jsfiddle" target="_blank" action="https://jsfiddle.net/api/post/library/pure/" method="post"><input type="hidden" name="html" value><input type="hidden" name="js" value="function print(n, i = 1, down = true) {
    if (i &gt; N) {
        return 
    }
    print(n, i + 1, true)
    console.log(down ? &#39;凹&#39; : &#39;凸&#39;)
    print(n, i + 1, false)
}"><input type="hidden" name="css" value><input type="hidden" name="wrap" value="1"><input type="hidden" name="panel_js" value="3"><input type="hidden" name="resources" value><button type="submit" class="jsfiddle-button" aria-label="JSFiddle" data-balloon-pos="up"><svg class="jsfiddle-icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg"><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg></button></form><form class="code-demo-codepen" target="_blank" action="https://codepen.io/pen/define" method="post"><input type="hidden" name="data" value="{&quot;html&quot;:&quot;&quot;,&quot;js&quot;:&quot;function print(n, i = 1, down = true) {\n    if (i &gt; N) {\n        return \n    }\n    print(n, i + 1, true)\n    console.log(down ? &#39;凹&#39; : &#39;凸&#39;)\n    print(n, i + 1, false)\n}&quot;,&quot;css&quot;:&quot;&quot;,&quot;js_external&quot;:&quot;&quot;,&quot;css_external&quot;:&quot;&quot;,&quot;layout&quot;:&quot;left&quot;,&quot;js_pre_processor&quot;:&quot;none&quot;,&quot;editors&quot;:&quot;101&quot;}"><button type="submit" class="codepen-button" aria-label="Codepen" data-balloon-pos="up"><svg class="codepen-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg></button></form></div><div class="loading-icon-wrapper vp-code-demo-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><div class="vp-code-demo-display" style="display:none;"></div><div class="vp-code-demo-code-wrapper" style="height:0;"><div class="vp-code-demo-codes"><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> down <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token constant">N</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> 
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>down <span class="token operator">?</span> <span class="token string">&#39;凹&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;凸&#39;</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><h2 id="树形dp套路" tabindex="-1"><a class="header-anchor" href="#树形dp套路" aria-hidden="true">#</a> 树形dp套路</h2><p>树形dp套路<br> 树形dp套路使用前提：如果题目求解目标是S规则，则求解流程可以定成以每一个节点为头节点的子树在s规则下的每一个答案，并且最终答案一定在其中</p><h3 id="二叉树节点最大距离问题" tabindex="-1"><a class="header-anchor" href="#二叉树节点最大距离问题" aria-hidden="true">#</a> 二叉树节点最大距离问题</h3><p>从二叉树的节点a出发，可以向上或者向下走，但沿途的节点只能经过一次，到达节点b时路径上的节点个数叫作a到b的距离，那么二叉树任何两个节点之间都有距离，求整棵树上的最大距离。</p><p>最大距离（整）</p><ol><li>头不参与<br> 左最大距离-<br> 右最大距离-max</li><li>头参与<br> 左高+1+右高-</li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TreeNode</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    left<span class="token operator">?</span><span class="token operator">:</span> TreeNode
    right<span class="token operator">?</span><span class="token operator">:</span> TreeNode
    value<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span>node<span class="token operator">?</span><span class="token operator">:</span> TreeNode<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>maxDistance<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            maxDistance<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> leftInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
    <span class="token keyword">const</span> rightInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token keyword">const</span> p1 <span class="token operator">=</span> leftInfo<span class="token punctuation">.</span>maxDistance
    <span class="token keyword">const</span> p2 <span class="token operator">=</span> rightInfo<span class="token punctuation">.</span>maxDistance
    <span class="token keyword">const</span> p3 <span class="token operator">=</span> leftInfo<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> rightInfo<span class="token punctuation">.</span>height
    <span class="token keyword">const</span> maxDistance <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p3<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p1<span class="token punctuation">)</span>
    <span class="token keyword">const</span> height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>height<span class="token punctuation">,</span> rightInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        maxDistance<span class="token punctuation">,</span>
        height<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="最大快乐值问题" tabindex="-1"><a class="header-anchor" href="#最大快乐值问题" aria-hidden="true">#</a> 最大快乐值问题</h3><ol><li>X参与<br> X乐+a整棵树a不来的最大快乐值+b整颗树b不来max+c整颗树c不来</li><li>X 不参与<br> max(a整棵树{a来，a不来})+max(b整颗树{b来，b不来})</li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Employee</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    happy<span class="token operator">:</span> <span class="token builtin">number</span>
    nexts<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Employee<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>nexts<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            lai<span class="token operator">:</span> x<span class="token punctuation">.</span>happy<span class="token punctuation">,</span>
            bu<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> lai <span class="token operator">=</span> x<span class="token punctuation">.</span>happy
    <span class="token keyword">let</span> bu <span class="token operator">=</span> <span class="token number">0</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>nexts<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token keyword">const</span> nextInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
        lai <span class="token operator">+=</span> nextInfo<span class="token punctuation">.</span>bu
        bu <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nextInfo<span class="token punctuation">.</span>lai<span class="token punctuation">,</span> nextInfo<span class="token punctuation">.</span>bu<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        lai<span class="token punctuation">,</span> 
        bu<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">maxHappy</span><span class="token punctuation">(</span>boss<span class="token operator">:</span> Employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> headInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>boss<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>headInfo<span class="token punctuation">.</span>lai<span class="token punctuation">,</span> headInfo<span class="token punctuation">.</span>bu<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="morris-遍历-线索二叉树" tabindex="-1"><a class="header-anchor" href="#morris-遍历-线索二叉树" aria-hidden="true">#</a> Morris 遍历 (线索二叉树)</h2><p>一种遍历二叉树的方式，并且时间复杂度O(N)，额外空间复杂度O(1)<br> 通过利用原树种大量空闲指针的方式，达到节省空间的目的</p><h3 id="morris遍历细节" tabindex="-1"><a class="header-anchor" href="#morris遍历细节" aria-hidden="true">#</a> Morris遍历细节</h3><p>假设来到当前节点cur，开始时cur来到头节点位置</p><p>1. 如果cur没有左孩子，cur向右移动(cur = cur.right)<br> 2. 如果cur有左孩子，找到左子树上最右的节点mostRight:<br> a.如果mostRight的右指针指向空，让其指向cur，然后cur向左移动(cur = cur.left)<br> b.如果mostRight的右指针指向cur，让其指向null，然后cur向右移动(cur = cur.right)<br> 3. cur为空时遍历停止</p><h3 id="morris遍历实现" tabindex="-1"><a class="header-anchor" href="#morris遍历实现" aria-hidden="true">#</a> Morris遍历实现</h3><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TreeNode</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    left<span class="token operator">?</span><span class="token operator">:</span> TreeNode
    right<span class="token operator">?</span><span class="token operator">:</span> TreeNode
    value<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    pre<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
    inOrder<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
    pos<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>node<span class="token operator">?</span><span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pre<span class="token operator">:</span> TreeNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>
    <span class="token keyword">let</span> next<span class="token operator">:</span> TreeNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        next <span class="token operator">=</span> node<span class="token punctuation">.</span>right
        node<span class="token punctuation">.</span>right <span class="token operator">=</span> pre
        pre <span class="token operator">=</span> node
        node <span class="token operator">=</span> next
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> pre 
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">morris</span><span class="token punctuation">(</span>head<span class="token operator">:</span> TreeNode<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> Options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>head<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        pre<span class="token punctuation">,</span>
        inOrder<span class="token punctuation">,</span>
        pos<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
    <span class="token keyword">let</span> cur<span class="token operator">:</span> TreeNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span> head
    <span class="token keyword">let</span> mostRight <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mostRight <span class="token operator">=</span> cur<span class="token punctuation">.</span>left <span class="token comment">// mostRight是cur左孩子</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mostRight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
            <span class="token keyword">while</span> <span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">&amp;&amp;</span> mostRight<span class="token punctuation">.</span>right <span class="token operator">!==</span> cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                mostRight <span class="token operator">=</span> mostRight<span class="token punctuation">.</span>right
            <span class="token punctuation">}</span>
            <span class="token comment">// mostRight变成cur最右节点</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mostRight<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 第一次来到cur</span>
                pre <span class="token operator">&amp;&amp;</span> <span class="token function">pre</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
                mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> cur
                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 第二次来到cur，只有有左子树才会来第二次</span>
                <span class="token comment">// mostRight.right === cur</span>
                inOrder <span class="token operator">&amp;&amp;</span> <span class="token function">inOrder</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
                mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 后序遍历</span>
                    <span class="token comment">// 第二次来到cur时，逆序左子树的右边界</span>
                    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">pos</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
                        root <span class="token operator">=</span> root<span class="token punctuation">.</span>right
                    <span class="token punctuation">}</span>
                    <span class="token comment">// 恢复原状</span>
                    root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            pre <span class="token operator">&amp;&amp;</span> <span class="token function">pre</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
            inOrder <span class="token operator">&amp;&amp;</span> <span class="token function">inOrder</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pos</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
            root <span class="token operator">=</span> root<span class="token punctuation">.</span>right
        <span class="token punctuation">}</span>
        <span class="token comment">// 恢复原状</span>
        root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">morris</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    left<span class="token operator">:</span> <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        left<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            left<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            right<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        right<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            left<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            right<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    right<span class="token operator">:</span> <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        left<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
            left<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            right<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        right<span class="token operator">:</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
            left<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            right<span class="token operator">:</span> <span class="token punctuation">{</span>
                value<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
    <span class="token function-variable function">pre</span><span class="token operator">:</span> <span class="token punctuation">(</span>treeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(treeNode.value)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">inOrder</span><span class="token operator">:</span> <span class="token punctuation">(</span>treeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(treeNode.value)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">pos</span><span class="token operator">:</span> <span class="token punctuation">(</span>treeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>treeNode<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用morris判断搜索二叉树" tabindex="-1"><a class="header-anchor" href="#使用morris判断搜索二叉树" aria-hidden="true">#</a> 使用Morris判断搜索二叉树</h3><p>对morris进行了一些改造，让其能够遇到false就中断，其实可以提供一个中断的函数，一调用就中断更合适</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TreeNode</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    left<span class="token operator">?</span><span class="token operator">:</span> TreeNode
    right<span class="token operator">?</span><span class="token operator">:</span> TreeNode
    value<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    pre<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">void</span>
    inOrder<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">void</span>
    pos<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>node<span class="token operator">?</span><span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pre<span class="token operator">:</span> TreeNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>
    <span class="token keyword">let</span> next<span class="token operator">:</span> TreeNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        next <span class="token operator">=</span> node<span class="token punctuation">.</span>right
        node<span class="token punctuation">.</span>right <span class="token operator">=</span> pre
        pre <span class="token operator">=</span> node
        node <span class="token operator">=</span> next
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> pre 
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">morris</span><span class="token punctuation">(</span>head<span class="token operator">:</span> TreeNode<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> Options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>head<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        pre<span class="token punctuation">,</span>
        inOrder<span class="token punctuation">,</span>
        pos<span class="token punctuation">,</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
    <span class="token keyword">let</span> cur<span class="token operator">:</span> TreeNode<span class="token operator">|</span><span class="token keyword">undefined</span> <span class="token operator">=</span> head
    <span class="token keyword">let</span> mostRight <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mostRight <span class="token operator">=</span> cur<span class="token punctuation">.</span>left <span class="token comment">// mostRight是cur左孩子</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mostRight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
            <span class="token keyword">while</span> <span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">&amp;&amp;</span> mostRight<span class="token punctuation">.</span>right <span class="token operator">!==</span> cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                mostRight <span class="token operator">=</span> mostRight<span class="token punctuation">.</span>right
            <span class="token punctuation">}</span>
            <span class="token comment">// mostRight变成cur最右节点</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mostRight<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 第一次来到cur</span>
                pre <span class="token operator">&amp;&amp;</span> <span class="token function">pre</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
                mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> cur
                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 第二次来到cur，只有有左子树才会来第二次</span>
                <span class="token comment">// mostRight.right === cur</span>
                <span class="token keyword">const</span> result <span class="token operator">=</span> inOrder <span class="token operator">&amp;&amp;</span> <span class="token function">inOrder</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
                mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 后序遍历</span>
                    <span class="token comment">// 第二次来到cur时，逆序左子树的右边界</span>
                    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">pos</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
                        root <span class="token operator">=</span> root<span class="token punctuation">.</span>right
                    <span class="token punctuation">}</span>
                    <span class="token comment">// 恢复原状</span>
                    root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            pre <span class="token operator">&amp;&amp;</span> <span class="token function">pre</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> inOrder <span class="token operator">&amp;&amp;</span> <span class="token function">inOrder</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pos</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
            root <span class="token operator">=</span> root<span class="token punctuation">.</span>right
        <span class="token punctuation">}</span>
        <span class="token comment">// 恢复原状</span>
        root <span class="token operator">=</span> <span class="token function">linkListReverse</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isBST</span><span class="token punctuation">(</span>head<span class="token operator">:</span> TreeNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>head<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">let</span> preValue <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">morris</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function">inOrder</span><span class="token punctuation">(</span>treeNode<span class="token punctuation">,</span> abort<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>treeNode<span class="token punctuation">.</span>value <span class="token operator">&lt;=</span> preValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            preValue <span class="token operator">=</span> treeNode<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所有关于树的遍历问题morris都是最优解</p><h2 id="何为具有平衡性的树" tabindex="-1"><a class="header-anchor" href="#何为具有平衡性的树" aria-hidden="true">#</a> 何为具有平衡性的树</h2><h2 id="介绍树的左旋" tabindex="-1"><a class="header-anchor" href="#介绍树的左旋" aria-hidden="true">#</a> 介绍树的左旋</h2><h2 id="介绍树的右旋" tabindex="-1"><a class="header-anchor" href="#介绍树的右旋" aria-hidden="true">#</a> 介绍树的右旋</h2></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/studyLib/algorithm/002LinkList.html" class="" aria-label="链表"><!--[--><!--]--> 链表 <!--[--><!--]--></a></span><span class="next"><a href="/studyLib/algorithm/004Graph.html" class="" aria-label="图"><!--[--><!--]--> 图 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/studyLib/assets/app-72993491.js" defer></script>
  </body>
</html>
