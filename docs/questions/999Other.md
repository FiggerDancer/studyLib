# 其他

## 如何实现一个虚拟列表

目前为止虽然我用过虚拟列表，但是还没有实际实现过虚拟列表，如果让我来实现虚拟列表的话，我会先考虑导出两个组件，一个组件是列表组件，一个组件是列表中的元素包裹器。先从简单的组件说起，元素包裹器，是一个插槽或者一个抽象组件，然后当该组件挂载后，需要告知父组件自己的高度，方便父组件来调度，这里我选择的方式是父组件provide提供一个map用来记录每个元素的高度，同时需要父组件提供一个ResizeObserver，当包裹器发生大小改变时，应该要改变每个元素的高度。然后我们再说父组件，在我的设想中，父组件中应该提供一个map存储所有的元素，一个map用来存储当前渲染的元素叫viewMap，一个map用来存储从未渲染的元素unusedMap（这些元素我不知道大小），然后每当挂载新包装器或者包装器高度变化时，我就重新计算下当前active元素的索引或者key值，初始的时候索引是0，拿到新的active元素索引，我就更新下这个其实也就是当前页面第一个元素吗，然后我就重新设置，因为该值之前的元素我都算过了，我都记录他们的高度，因此我就能算出本次滚动条变化的幅度，我就滚动下。同时往里面添加元素，添加多少合适，我就给出用户一个每个包裹器内容最小高度，让他输入，然后滚动多高，我就添加多少个。同时至于这个虚拟列表的最小高度，也可以通过这个包裹器的内容最小高度来计算出来，然后虚拟列表的最小高度应该是随着一个一个元素被加载过，最后这个高度应该是可以完全算出来的。暂时就这么想的吧

## 谈谈如何做到性能优化

## 进程与线程的关系（美图）

进程是指在系统中运行的一个应用程序。线程是系统分配处理器时间资源的基本单元。对于操作系统而言，其调度单元是线程。一个进程至少包括一个线程，通常将该线程称为主线程。一个进程从主线程开始进而创建一个或多个附加线程，就是多线程的多任务。一个进程就好比一个沙箱，沙箱之间是禁止往来的，可以通过协议共享内存来进行沟通。执行功能的是线程。

## 知道内存里的堆和栈吗？一个进程有几个堆几个栈？一个线程呢？（美图）

堆是大家共有的空间，在系统运行中分配给程序，然后程序用完了回收。栈是线程独有的，保存其运行状态和局部自动变量。每个线程都有自己的一个栈，每个进程都有自己的一个堆。在JS中将变量、函数、类、常量等存放在堆中，当执行某个函数或者代码片段，将该代码片段，放入执行栈中，并创建函数的执行上下文放到堆里，当执行到块级作用域也会创建环境上下文，当执行其内部新的函数时新函数入栈，执行完后出栈，如果入栈的函数太多，超过限制，而一直不出栈就会造成像我们平时说的JS递归调用栈溢出问题。

## 谈一谈浏览器下的JS的单线程（美图）

作为浏览器的脚本语言，JS的主要用途是与用户互动，那就离不开界面的呈现，界面的呈现伴随的大量的DOM的增删，大量的反复渲染，也就是布局和回流。如果是JS是多线程的，那么如果布局在两个线程中发生了不同的改变又该以谁为准呢，当然我们可以增加锁机制，但这会大大增加浏览器的复杂性。因为JS是单线程的，在某一时刻只能执行某个任务，并且会阻塞其他任务执行，所以JS有一个事件循环的机制来实现异步任务。JS被加载后会先执行同步任务，并将异步任务加载到事件队列中，当同步任务执行完毕后，JS会循环判事件队列队头是否有任务存在，如果有就会执行该任务，值得一提的事，每次JS执行完宏任务后会先执行完所有的微任务，再执行下一个宏任务。

## 用过哪些设计模式？装饰器模式你是怎么用的？(作业帮)

## 场景：一个列表页，从某一页点进详情页了，想要返回的时候能回到上一次看的位置(小米)

## 情景：一个分页列表，连续点击翻页，会出现页面数据错乱的问题（比如第二页展示了第三页的数据），可能是因为什么原因导致的。怎么解决（高涂）

## TS：泛型怎么理解、用在哪了都、一些内置API pick，readonly有没有用到（百度）
